import 'dart:convert';
import "package:http/http.dart" as http;
import './photo.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';

var client_id = dotenv.env['CLIENT_ID']??"";

Future<Photo> http_get_random_Photo([dynamic data]) async
{

  
  //http.get(Uri.parse('https://api.unsplash.com/photos/random/?client_id=S_vBTCKYQ5qL4vgOVeFxK7-Zn-bXQRF-r8h7vi5u5dM'));
  //Uri uri = Uri.http("api.unsplash.com/photos", "/random", { "client_id" : "S_vBTCKYQ5qL4vgOVeFxK7-Zn-bXQRF-r8h7vi5u5dM"});
  var result = await http.get(Uri.parse('https://api.unsplash.com/photos/random/?client_id='+client_id));
  var decodeReesp = jsonDecode(result.body);
  return  Photo.fromJson(decodeReesp);
}


Future<List<Photo>> http_get_Photos({int perPage = 10, int pageNumber = 0, String? searchQuery}) async
{
  
  //http.get(Uri.parse('https://api.unsplash.com/photos/random/?client_id=S_vBTCKYQ5qL4vgOVeFxK7-Zn-bXQRF-r8h7vi5u5dM'));
  //Uri uri = Uri.http("api.unsplash.com/photos", "/random", { "client_id" : "S_vBTCKYQ5qL4vgOVeFxK7-Zn-bXQRF-r8h7vi5u5dM"});
  var result = await http.get(Uri.parse('https://api.unsplash.com/photos/?client_id='+client_id+'&page='+pageNumber.toString()));
  var decodeReesp = jsonDecode(result.body);
  return  allFromJson(decodeReesp);
}

